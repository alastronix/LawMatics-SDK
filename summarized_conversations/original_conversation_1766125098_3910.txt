{'role': 'assistant', 'content': '\nNow let me create unit tests for the authentication and configuration classes.\n\n<function_calls>\n<create-file file_path="LawMatics.SDK.Tests/Authentication/LawMaticsCredentialsTests.cs">\nusing System;\nusing LawMatics.SDK.Authentication;\nusing LawMatics.SDK.Models;\nusing Xunit;\n\nnamespace LawMatics.SDK.Tests.Authentication\n{\n    /// <summary>\n    /// Unit tests for the <see cref="LawMaticsCredentials"/> class.\n    /// </summary>\n    public class LawMaticsCredentialsTests\n    {\n        [Fact]\n        public void Constructor_WithAccessToken_SetsAccessToken()\n        {\n            // Arrange\n            var accessToken = "test-access-token";\n\n            // Act\n            var credentials = new LawMaticsCredentials(accessToken);\n\n            // Assert\n            Assert.Equal(accessToken, credentials.AccessToken);\n            Assert.Equal("Bearer", credentials.TokenType);\n        }\n\n        [Fact]\n        public void Constructor_WithNullAccessToken_ThrowsArgumentNullException()\n        {\n            // Act & Assert\n            Assert.Throws<ArgumentNullException>(() => new LawMaticsCredentials(null!));\n        }\n\n        [Fact]\n        public void Constructor_WithFullCredentials_SetsAllProperties()\n        {\n            // Arrange\n            var clientId = "test-client-id";\n            var clientSecret = "test-client-secret";\n            var accessToken = "test-access-token";\n            var refreshToken = "test-refresh-token";\n            var expiresAt = DateTime.UtcNow.AddHours(1);\n\n            // Act\n            var credentials = new LawMaticsCredentials(clientId, clientSecret, accessToken, refreshToken, expiresAt);\n\n            // Assert\n            Assert.Equal(clientId, credentials.ClientId);\n            Assert.Equal(clientSecret, credentials.ClientSecret);\n            Assert.Equal(accessToken, credentials.AccessToken);\n            Assert.Equal(refreshToken, credentials.RefreshToken);\n            Assert.Equal(expiresAt, credentials.ExpiresAt);\n            Assert.Equal("Bearer", credentials.TokenType);\n        }\n\n        [Fact]\n        public void Constructor_WithNullClientId_ThrowsArgumentNullException()\n        {\n            // Act & Assert\n            Assert.Throws<ArgumentNullException>(() => \n                new LawMaticsCredentials(null!, "secret", "token"));\n        }\n\n        [Fact]\n        public void Constructor_WithNullClientSecret_ThrowsArgumentNullException()\n        {\n            // Act & Assert\n            Assert.Throws<ArgumentNullException>(() => \n                new LawMaticsCredentials("client", null!, "token"));\n        }\n\n        [Fact]\n        public void Constructor_WithNullAccessToken_ThrowsArgumentNullException()\n        {\n            // Act & Assert\n            Assert.Throws<ArgumentNullException>(() => \n                new LawMaticsCredentials("client", "secret", null!));\n        }\n\n        [Fact]\n        public void IsExpired_WithExpiredToken_ReturnsTrue()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "token", "refresh", DateTime.UtcNow.AddMinutes(-10));\n\n            // Act & Assert\n            Assert.True(credentials.IsExpired);\n        }\n\n        [Fact]\n        public void IsExpired_WithTokenExpiringSoon_ReturnsTrue()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "token", "refresh", DateTime.UtcNow.AddMinutes(3));\n\n            // Act & Assert\n            Assert.True(credentials.IsExpired);\n        }\n\n        [Fact]\n        public void IsExpired_WithValidToken_ReturnsFalse()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "token", "refresh", DateTime.UtcNow.AddHours(1));\n\n            // Act & Assert\n            Assert.False(credentials.IsExpired);\n        }\n\n        [Fact]\n        public void IsExpired_WithNoExpiration_ReturnsFalse()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "token");\n\n            // Act & Assert\n            Assert.False(credentials.IsExpired);\n        }\n\n        [Fact]\n        public void HasRefreshToken_WithRefreshToken_ReturnsTrue()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "token", "refresh-token");\n\n            // Act & Assert\n            Assert.True(credentials.HasRefreshToken);\n        }\n\n        [Fact]\n        public void HasRefreshToken_WithNullRefreshToken_ReturnsFalse()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "token");\n\n            // Act & Assert\n            Assert.False(credentials.HasRefreshToken);\n        }\n\n        [Fact]\n        public void HasRefreshToken_WithEmptyRefreshToken_ReturnsFalse()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "token", "");\n\n            // Act & Assert\n            Assert.False(credentials.HasRefreshToken);\n        }\n\n        [Fact]\n        public void FromTokenResponse_WithFullResponse_CreatesCredentials()\n        {\n            // Arrange\n            var tokenResponse = new OAuthTokenResponse\n            {\n                AccessToken = "new-access-token",\n                RefreshToken = "new-refresh-token",\n                TokenType = "Bearer",\n                ExpiresIn = 3600,\n                Scope = "read write"\n            };\n            var clientId = "test-client-id";\n            var clientSecret = "test-client-secret";\n\n            // Act\n            var credentials = LawMaticsCredentials.FromTokenResponse(tokenResponse, clientId, clientSecret);\n\n            // Assert\n            Assert.Equal(clientId, credentials.ClientId);\n            Assert.Equal(clientSecret, credentials.ClientSecret);\n            Assert.Equal(tokenResponse.AccessToken, credentials.AccessToken);\n            Assert.Equal(tokenResponse.RefreshToken, credentials.RefreshToken);\n            Assert.Equal(tokenResponse.TokenType, credentials.TokenType);\n            Assert.True(credentials.ExpiresAt.HasValue);\n            Assert.True(credentials.ExpiresAt.Value > DateTime.UtcNow);\n            Assert.True(credentials.ExpiresAt.Value <= DateTime.UtcNow.AddSeconds(3600).AddMinutes(1)); // Allow 1 minute tolerance\n        }\n\n        [Fact]\n        public void FromTokenResponse_WithNoExpiration_CreatesCredentialsWithoutExpiration()\n        {\n            // Arrange\n            var tokenResponse = new OAuthTokenResponse\n            {\n                AccessToken = "new-access-token",\n                RefreshToken = "new-refresh-token",\n                TokenType = "Bearer"\n                // No ExpiresIn\n            };\n            var clientId = "test-client-id";\n            var clientSecret = "test-client-secret";\n\n            // Act\n            var credentials = LawMaticsCredentials.FromTokenResponse(tokenResponse, clientId, clientSecret);\n\n            // Assert\n            Assert.Equal(clientId, credentials.ClientId);\n            Assert.Equal(clientSecret, credentials.ClientSecret);\n            Assert.Equal(tokenResponse.AccessToken, credentials.AccessToken);\n            Assert.Equal(tokenResponse.RefreshToken, credentials.RefreshToken);\n            Assert.Equal(tokenResponse.TokenType, credentials.TokenType);\n            Assert.False(credentials.ExpiresAt.HasValue);\n        }\n\n        [Fact]\n        public void FromTokenResponse_WithNullTokenResponse_ThrowsArgumentNullException()\n        {\n            // Act & Assert\n            Assert.Throws<ArgumentNullException>(() => \n                LawMaticsCredentials.FromTokenResponse(null!, "client", "secret"));\n        }\n\n        [Fact]\n        public void UpdateToken_WithAllParameters_UpdatesAllTokenProperties()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "old-token");\n            var newAccessToken = "new-access-token";\n            var newRefreshToken = "new-refresh-token";\n            var expiresIn = 7200;\n\n            // Act\n            credentials.UpdateToken(newAccessToken, newRefreshToken, expiresIn);\n\n            // Assert\n            Assert.Equal(newAccessToken, credentials.AccessToken);\n            Assert.Equal(newRefreshToken, credentials.RefreshToken);\n            Assert.True(credentials.ExpiresAt.HasValue);\n            Assert.True(credentials.ExpiresAt.Value > DateTime.UtcNow);\n            Assert.True(credentials.ExpiresAt.Value <= DateTime.UtcNow.AddSeconds(expiresIn).AddMinutes(1)); // Allow 1 minute tolerance\n        }\n\n        [Fact]\n        public void UpdateToken_WithOnlyAccessToken_UpdatesOnlyAccessToken()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "old-token", "old-refresh");\n            var newAccessToken = "new-access-token";\n\n            // Act\n            credentials.UpdateToken(newAccessToken);\n\n            // Assert\n            Assert.Equal(newAccessToken, credentials.AccessToken);\n            Assert.Equal("old-refresh", credentials.RefreshToken); // Should remain unchanged\n        }\n\n        [Fact]\n        public void UpdateToken_WithEmptyRefreshToken_DoesNotUpdateRefreshToken()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "old-token", "old-refresh");\n            var newAccessToken = "new-access-token";\n\n            // Act\n            credentials.UpdateToken(newAccessToken, "", null);\n\n            // Assert\n            Assert.Equal(newAccessToken, credentials.AccessToken);\n            Assert.Equal("old-refresh", credentials.RefreshToken); // Should remain unchanged\n        }\n\n        [Fact]\n        public void UpdateToken_WithNullAccessToken_ThrowsArgumentNullException()\n        {\n            // Arrange\n            var credentials = new LawMaticsCredentials("client", "secret", "old-token");\n\n            // Act & Assert\n            Assert.Throws<ArgumentNullException>(() => credentials.UpdateToken(null!));\n        }\n    }\n}\n</create-file>\n</function_calls>'}