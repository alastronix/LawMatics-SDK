{'role': 'assistant', 'content': '\nNow let me create tests for FilesClient and FoldersClient.\n\n\n\n<function_calls>\n<create-file file_path="./LawMatics.SDK.Tests/Clients/FilesClientTests.cs">\nusing System;\nusing System.IO;\nusing System.Net;\nusing System.Net.Http;\nusing System.Text.Json;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing LawMatics.SDK.Authentication;\nusing LawMatics.SDK.Clients;\nusing LawMatics.SDK.Configuration;\nusing LawMatics.SDK.Models;\nusing Microsoft.Extensions.Logging;\nusing Moq;\nusing Moq.Protected;\nusing Xunit;\n\nnamespace LawMatics.SDK.Tests.Clients\n{\n    /// <summary>\n    /// Unit tests for the <see cref="FilesClient"/> class.\n    /// </summary>\n    public class FilesClientTests : IDisposable\n    {\n        private readonly Mock<HttpMessageHandler> _mockHttpMessageHandler;\n        private readonly Mock<ILogger<FilesClient>> _mockLogger;\n        private readonly LawMaticsClientOptions _options;\n        private readonly LawMaticsCredentials _credentials;\n        private readonly HttpClient _httpClient;\n        private readonly FilesClient _client;\n\n        public FilesClientTests()\n        {\n            _mockHttpMessageHandler = new Mock<HttpMessageHandler>();\n            _mockLogger = new Mock<ILogger<FilesClient>>();\n            _options = new LawMaticsClientOptions\n            {\n                BaseUrl = "https://api.test.lawmatics.com",\n                ApiVersion = "v1",\n                TimeoutSeconds = 30\n            };\n            _credentials = new LawMaticsCredentials("test-access-token");\n            _httpClient = new HttpClient(_mockHttpMessageHandler.Object);\n            _client = new FilesClient(_httpClient, _options, _mockLogger.Object);\n        }\n\n        [Fact]\n        public async Task GetFilesAsync_WithValidResponse_ReturnsFiles()\n        {\n            // Arrange\n            var expectedResponse = new PagedResponse<LawMaticsFile>\n            {\n                Data = new List<LawMaticsFile>\n                {\n                    new LawMaticsFile { Id = 1, Name = "test1.pdf", Size = 1024, Type = "PDF" },\n                    new LawMaticsFile { Id = 2, Name = "test2.docx", Size = 2048, Type = "Word" }\n                },\n                Pagination = new PaginationInfo { Page = 1, PageSize = 10, TotalCount = 2 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetFilesAsync();\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(2, result.Data.Count);\n            Assert.Equal("test1.pdf", result.Data[0].Name);\n            Assert.Equal("test2.docx", result.Data[1].Name);\n        }\n\n        [Fact]\n        public async Task GetFileAsync_WithValidId_ReturnsFile()\n        {\n            // Arrange\n            var expectedResponse = new ApiResponse<LawMaticsFile>\n            {\n                Data = new LawMaticsFile { Id = 1, Name = "test.pdf", Size = 1024, Type = "PDF" }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetFileAsync(1);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal("test.pdf", result.Data.Name);\n            Assert.Equal(1024, result.Data.Size);\n            Assert.Equal("PDF", result.Data.Type);\n        }\n\n        [Fact]\n        public async Task UploadFileAsync_WithValidRequest_ReturnsUploadedFile()\n        {\n            // Arrange\n            var fileName = "test.pdf";\n            var fileContent = "Test file content";\n            var fileStream = new MemoryStream(System.Text.Encoding.UTF8.GetBytes(fileContent));\n            var request = new UploadDocumentRequest\n            {\n                FileName = fileName,\n                FileContent = fileStream,\n                FolderId = 1,\n                Description = "Test document"\n            };\n            var expectedResponse = new ApiResponse<LawMaticsFile>\n            {\n                Data = new LawMaticsFile \n                { \n                    Id = 1, \n                    Name = request.FileName, \n                    Size = fileContent.Length,\n                    Type = "PDF",\n                    FolderId = request.FolderId,\n                    Description = request.Description\n                }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.Created)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.UploadFileAsync(request);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal(request.FileName, result.Data.Name);\n            Assert.Equal(fileContent.Length, result.Data.Size);\n            Assert.Equal(request.FolderId, result.Data.FolderId);\n            Assert.Equal(request.Description, result.Data.Description);\n        }\n\n        [Fact]\n        public async Task UpdateFileAsync_WithValidRequest_ReturnsUpdatedFile()\n        {\n            // Arrange\n            var request = new UpdateFileRequest\n            {\n                Name = "updated.pdf",\n                Description = "Updated description",\n                FolderId = 2\n            };\n            var expectedResponse = new ApiResponse<LawMaticsFile>\n            {\n                Data = new LawMaticsFile \n                { \n                    Id = 1, \n                    Name = request.Name, \n                    Description = request.Description,\n                    FolderId = request.FolderId\n                }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.UpdateFileAsync(1, request);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal(request.Name, result.Data.Name);\n            Assert.Equal(request.Description, result.Data.Description);\n            Assert.Equal(request.FolderId, result.Data.FolderId);\n        }\n\n        [Fact]\n        public async Task DeleteFileAsync_WithValidId_ReturnsSuccessResponse()\n        {\n            // Arrange\n            var expectedResponse = new ApiResponse<object> { Data = null };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.NoContent)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.DeleteFileAsync(1);\n\n            // Assert\n            Assert.NotNull(result);\n        }\n\n        [Fact]\n        public async Task DownloadFileAsync_WithValidId_ReturnsFileContent()\n        {\n            // Arrange\n            var fileContent = "Test file content";\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(fileContent, System.Text.Encoding.UTF8, "application/pdf")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.DownloadFileAsync(1);\n\n            // Assert\n            Assert.NotNull(result);\n            var downloadedContent = await new StreamReader(result).ReadToEndAsync();\n            Assert.Equal(fileContent, downloadedContent);\n        }\n\n        [Fact]\n        public async Task GetFilesByFolderAsync_WithFolderId_ReturnsFilesInFolder()\n        {\n            // Arrange\n            var folderId = 1;\n            var expectedResponse = new PagedResponse<LawMaticsFile>\n            {\n                Data = new List<LawMaticsFile>\n                {\n                    new LawMaticsFile { Id = 1, Name = "folder_file.pdf", FolderId = folderId }\n                },\n                Pagination = new PaginationInfo { Page = 1, PageSize = 10, TotalCount = 1 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetFilesByFolderAsync(folderId);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Single(result.Data);\n            Assert.Equal("folder_file.pdf", result.Data[0].Name);\n            Assert.Equal(folderId, result.Data[0].FolderId);\n        }\n\n        public void Dispose()\n        {\n            _httpClient?.Dispose();\n            _client?.Dispose();\n        }\n    }\n}\n</create-file>\n</function_calls>'}