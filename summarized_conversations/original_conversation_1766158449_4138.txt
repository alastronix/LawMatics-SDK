{'role': 'assistant', 'content': '\nNow let me create tests for CustomFieldsClient and CustomFormsClient.\n\n\n\n<function_calls>\n<create-file file_path="./LawMatics.SDK.Tests/Clients/CustomFieldsClientTests.cs">\nusing System;\nusing System.Net;\nusing System.Net.Http;\nusing System.Text.Json;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing LawMatics.SDK.Authentication;\nusing LawMatics.SDK.Clients;\nusing LawMatics.SDK.Configuration;\nusing LawMatics.SDK.Models;\nusing Microsoft.Extensions.Logging;\nusing Moq;\nusing Moq.Protected;\nusing Xunit;\n\nnamespace LawMatics.SDK.Tests.Clients\n{\n    /// <summary>\n    /// Unit tests for the <see cref="CustomFieldsClient"/> class.\n    /// </summary>\n    public class CustomFieldsClientTests : IDisposable\n    {\n        private readonly Mock<HttpMessageHandler> _mockHttpMessageHandler;\n        private readonly Mock<ILogger<CustomFieldsClient>> _mockLogger;\n        private readonly LawMaticsClientOptions _options;\n        private readonly LawMaticsCredentials _credentials;\n        private readonly HttpClient _httpClient;\n        private readonly CustomFieldsClient _client;\n\n        public CustomFieldsClientTests()\n        {\n            _mockHttpMessageHandler = new Mock<HttpMessageHandler>();\n            _mockLogger = new Mock<ILogger<CustomFieldsClient>>();\n            _options = new LawMaticsClientOptions\n            {\n                BaseUrl = "https://api.test.lawmatics.com",\n                ApiVersion = "v1",\n                TimeoutSeconds = 30\n            };\n            _credentials = new LawMaticsCredentials("test-access-token");\n            _httpClient = new HttpClient(_mockHttpMessageHandler.Object);\n            _client = new CustomFieldsClient(_httpClient, _options, _mockLogger.Object);\n        }\n\n        [Fact]\n        public async Task GetCustomFieldsAsync_WithValidResponse_ReturnsCustomFields()\n        {\n            // Arrange\n            var expectedResponse = new PagedResponse<CustomField>\n            {\n                Data = new List<CustomField>\n                {\n                    new CustomField { Id = 1, Name = "Custom Field 1", Type = "Text", EntityType = "Contact" },\n                    new CustomField { Id = 2, Name = "Custom Field 2", Type = "Number", EntityType = "Matter" }\n                },\n                Pagination = new PaginationInfo { Page = 1, PageSize = 10, TotalCount = 2 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetCustomFieldsAsync();\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(2, result.Data.Count);\n            Assert.Equal("Custom Field 1", result.Data[0].Name);\n            Assert.Equal("Custom Field 2", result.Data[1].Name);\n        }\n\n        [Fact]\n        public async Task GetCustomFieldAsync_WithValidId_ReturnsCustomField()\n        {\n            // Arrange\n            var expectedResponse = new ApiResponse<CustomField>\n            {\n                Data = new CustomField { Id = 1, Name = "Test Field", Type = "Text", EntityType = "Contact" }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetCustomFieldAsync(1);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal("Test Field", result.Data.Name);\n            Assert.Equal("Text", result.Data.Type);\n            Assert.Equal("Contact", result.Data.EntityType);\n        }\n\n        [Fact]\n        public async Task CreateCustomFieldAsync_WithValidRequest_ReturnsCreatedCustomField()\n        {\n            // Arrange\n            var request = new CreateCustomFieldRequest\n            {\n                Name = "New Custom Field",\n                Type = "Text",\n                EntityType = "Contact",\n                Description = "Test Description",\n                Required = true,\n                Options = new List<string> { "Option 1", "Option 2" }\n            };\n            var expectedResponse = new ApiResponse<CustomField>\n            {\n                Data = new CustomField \n                { \n                    Id = 1, \n                    Name = request.Name, \n                    Type = request.Type,\n                    EntityType = request.EntityType,\n                    Description = request.Description,\n                    Required = request.Required,\n                    Options = request.Options\n                }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.Created)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.CreateCustomFieldAsync(request);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal(request.Name, result.Data.Name);\n            Assert.Equal(request.Type, result.Data.Type);\n            Assert.Equal(request.EntityType, result.Data.EntityType);\n            Assert.Equal(request.Description, result.Data.Description);\n            Assert.Equal(request.Required, result.Data.Required);\n            Assert.Equal(request.Options, result.Data.Options);\n        }\n\n        [Fact]\n        public async Task UpdateCustomFieldAsync_WithValidRequest_ReturnsUpdatedCustomField()\n        {\n            // Arrange\n            var request = new UpdateCustomFieldRequest\n            {\n                Name = "Updated Field",\n                Description = "Updated Description",\n                Required = false\n            };\n            var expectedResponse = new ApiResponse<CustomField>\n            {\n                Data = new CustomField \n                { \n                    Id = 1, \n                    Name = request.Name, \n                    Description = request.Description,\n                    Required = request.Required\n                }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.UpdateCustomFieldAsync(1, request);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal(request.Name, result.Data.Name);\n            Assert.Equal(request.Description, result.Data.Description);\n            Assert.Equal(request.Required, result.Data.Required);\n        }\n\n        [Fact]\n        public async Task DeleteCustomFieldAsync_WithValidId_ReturnsSuccessResponse()\n        {\n            // Arrange\n            var expectedResponse = new ApiResponse<object> { Data = null };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.NoContent)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.DeleteCustomFieldAsync(1);\n\n            // Assert\n            Assert.NotNull(result);\n        }\n\n        [Fact]\n        public async Task GetCustomFieldsByEntityTypeAsync_WithEntityType_ReturnsFilteredFields()\n        {\n            // Arrange\n            var entityType = "Contact";\n            var expectedResponse = new PagedResponse<CustomField>\n            {\n                Data = new List<CustomField>\n                {\n                    new CustomField { Id = 1, Name = "Contact Field 1", Type = "Text", EntityType = entityType },\n                    new CustomField { Id = 2, Name = "Contact Field 2", Type = "Number", EntityType = entityType }\n                },\n                Pagination = new PaginationInfo { Page = 1, PageSize = 10, TotalCount = 2 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetCustomFieldsByEntityTypeAsync(entityType);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(2, result.Data.Count);\n            Assert.All(result.Data, field => Assert.Equal(entityType, field.EntityType));\n        }\n\n        [Fact]\n        public async Task GetCustomFieldValuesAsync_WithValidParams_ReturnsFieldValues()\n        {\n            // Arrange\n            var fieldId = 1;\n            var entityId = 100;\n            var entityType = "Contact";\n            var expectedResponse = new ApiResponse<Dictionary<string, object>>\n            {\n                Data = new Dictionary<string, object>\n                {\n                    { "fieldId", fieldId },\n                    { "entityId", entityId },\n                    { "entityType", entityType },\n                    { "value", "Test Value" }\n                }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetCustomFieldValuesAsync(fieldId, entityId, entityType);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal("Test Value", result.Data["value"]);\n        }\n\n        [Fact]\n        public async Task SetCustomFieldValueAsync_WithValidParams_ReturnsSuccessResponse()\n        {\n            // Arrange\n            var fieldId = 1;\n            var entityId = 100;\n            var entityType = "Contact";\n            var value = "New Value";\n            var request = new\n            {\n                FieldId = fieldId,\n                EntityId = entityId,\n                EntityType = entityType,\n                Value = value\n            };\n            var expectedResponse = new ApiResponse<object> { Data = new { Success = true } };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.SetCustomFieldValueAsync(fieldId, entityId, entityType, value);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n        }\n\n        public void Dispose()\n        {\n            _httpClient?.Dispose();\n            _client?.Dispose();\n        }\n    }\n}\n</create-file>\n</function_calls>'}