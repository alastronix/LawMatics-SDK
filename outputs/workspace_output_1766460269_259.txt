            _mockHttpMessageHandler
                .Protected()
                .Setup<Task<HttpResponseMessage>>(
                    "SendAsync",
                    ItExpr.Is<HttpRequestMessage>(req => 
                        req.Method == HttpMethod.Get && 
                        req.RequestUri != null &&
                        req.RequestUri.ToString().Contains("custom-contact-types?")),
                    ItExpr.IsAny<CancellationToken>())
                .ReturnsAsync(response);

            // Act
            var result = await client.GetCustomContactTypesAsync();

            // Assert
            Assert.NotNull(result);
            Assert.NotNull(result.Data);
            Assert.Single(result.Data);
            Assert.Equal(1, result.Data[0].Id);
            Assert.Equal("Client", result.Data[0].Name);
        }

        [Fact]
        public async Task GetCustomContactTypeAsync_WithValidId_ReturnsCustomContactType()
        {
            // Arrange
            var client = new CustomContactTypesClient(_httpClient, _options, _mockLogger.Object);
            var expectedCustomContactType = new CustomContactType
            {
                Id = 1,
                Name = "Client",
                Description = "Regular clients of the firm",
                CreatedAt = DateTime.UtcNow,
                UpdatedAt = DateTime.UtcNow
            };

            var apiResponse = new ApiResponse<CustomContactType> { Data = expectedCustomContactType };
            var jsonResponse = JsonSerializer.Serialize(apiResponse, _jsonOptions);
            var response = new HttpResponseMessage(HttpStatusCode.OK)
            {
                Content = new StringContent(jsonResponse, System.Text.Encoding.UTF8, "application/json")
