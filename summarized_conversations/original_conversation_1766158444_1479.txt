{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "using System;\\\\nusing System.Net;\\\\nusing System.Net.Http;\\\\nusing System.Text.Json;\\\\nusing System.Threading;\\\\nusing System.Threading.Tasks;\\\\nusing LawMatics.SDK.Authentication;\\\\nusing LawMatics.SDK.Configuration;\\\\nusing LawMatics.SDK.Exceptions;\\\\nusing LawMatics.SDK.Models;\\\\nusing Microsoft.Extensions.Logging;\\\\nusing Moq;\\\\nusing Moq.Protected;\\\\nusing Xunit;\\\\n\\\\nnamespace LawMatics.SDK.Tests\\\\n{\\\\n    /// <summary>\\\\n    /// Unit tests for the <see cref=\\\\"LawMaticsClient\\\\"/> class.\\\\n    /// </summary>\\\\n    public class LawMaticsClientTests : IDisposable\\\\n    {\\\\n        private readonly Mock<HttpMessageHandler> _mockHttpMessageHandler;\\\\n        private readonly Mock<ILogger<LawMaticsClient>> _mockLogger;\\\\n        private readonly LawMaticsClientOptions _options;\\\\n        private readonly LawMaticsCredentials _credentials;\\\\n\\\\n        public LawMaticsClientTests()\\\\n        {\\\\n            _mockHttpMessageHandler = new Mock<HttpMessageHandler>();\\\\n            _mockLogger = new Mock<ILogger<LawMaticsClient>>();\\\\n            _options = new LawMaticsClientOptions\\\\n            {\\\\n                BaseUrl = \\\\"https://api.test.lawmatics.com\\\\",\\\\n                ApiVersion = \\\\"v1\\\\",\\\\n                TimeoutSeconds = 30\\\\n            };\\\\n            _credentials = new LawMaticsCredentials(\\\\"test-access-token\\\\")\\\\n            {\\\\n                ClientId = \\\\"test-client-id\\\\",\\\\n                ClientSecret = \\\\"test-client-secret\\\\",\\\\n                RefreshToken = \\\\"test-refresh-token\\\\"\\\\n            };\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void Constructor_WithNullCredentials_ThrowsArgumentNullException()\\\\n        {\\\\n            // Act & Assert\\\\n            Assert.Throws<ArgumentNullException>(() => new LawMaticsClient(null!, _options, _mockLogger.Object));\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void Constructor_WithNullOptions_UsesDefaultOptions()\\\\n        {\\\\n            // Act\\\\n            using var client = new LawMaticsClient(_credentials, null, _mockLogger.Object);\\\\n\\\\n            // Assert\\\\n            Assert.NotNull(client);\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void Constructor_WithNullLogger_UsesNullLogger()\\\\n        {\\\\n            // Act\\\\n            using var client = new LawMaticsClient(_credentials, _options, null);\\\\n\\\\n            // Assert\\\\n            Assert.NotNull(client);\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void Constructor_WithInvalidBaseUrl_ThrowsArgumentException()\\\\n        {\\\\n            // Arrange\\\\n            var invalidOptions = new LawMaticsClientOptions\\\\n            {\\\\n                BaseUrl = \\\\"invalid-url\\\\"\\\\n            };\\\\n\\\\n            // Act & Assert\\\\n            Assert.Throws<ArgumentException>(() => new LawMaticsClient(_credentials, invalidOptions, _mockLogger.Object));\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void Constructor_WithNegativeTimeout_ThrowsArgumentException()\\\\n        {\\\\n            // Arrange\\\\n            var invalidOptions = new LawMaticsClientOptions\\\\n            {\\\\n                TimeoutSeconds = -1\\\\n            };\\\\n\\\\n            // Act & Assert\\\\n            Assert.Throws<ArgumentException>(() => new LawMaticsClient(_credentials, invalidOptions, _mockLogger.Object));\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void Constructor_WithValidParameters_CreatesClient()\\\\n        {\\\\n            // Act\\\\n            using var client = new LawMaticsClient(_credentials, _options, _mockLogger.Object);\\\\n\\\\n            // Assert\\\\n            Assert.NotNull(client);\\\\n            Assert.NotNull(client.Contacts);\\\\n            Assert.NotNull(client.Companies);\\\\n            Assert.NotNull(client.Matters);\\\\n            Assert.NotNull(client.Events);\\\\n            Assert.NotNull(client.Files);\\\\n            Assert.NotNull(client.Folders);\\\\n            Assert.NotNull(client.EmailCampaigns);\\\\n            Assert.NotNull(client.Payments);\\\\n            Assert.NotNull(client.CustomFields);\\\\n            Assert.NotNull(client.CustomForms);\\\\n            Assert.NotNull(client.Notes);\\\\n            Assert.NotNull(client.Users);\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void UpdateCredentials_WithNullCredentials_ThrowsArgumentNullException()\\\\n        {\\\\n            // Arrange\\\\n            using var client = new LawMaticsClient(_credentials, _options, _mockLogger.Object);\\\\n\\\\n            // Act & Assert\\\\n            Assert.Throws<ArgumentNullException>(() => client.UpdateCredentials(null!));\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void UpdateCredentials_WithValidCredentials_UpdatesCredentials()\\\\n        {\\\\n            // Arrange\\\\n            using var client = new LawMaticsClient(_credentials, _options, _mockLogger.Object);\\\\n            var newCredentials = new LawMaticsCredentials(\\\\"new-access-token\\\\");\\\\n\\\\n            // Act\\\\n            client.UpdateCredentials(newCredentials);\\\\n\\\\n            // Assert\\\\n            Assert.Equal(\\\\"new-access-token\\\\", client.Credentials.AccessToken);\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public async Task GetAsync_WithValidEndpoint_ReturnsResponse()\\\\n        {\\\\n            // Arrange\\\\n            var expectedData = new { Message = \\\\"Test data\\\\" };\\\\n            var expectedResponse = new ApiResponse<object> { Data = expectedData };\\\\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\\\\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\\\\n            {\\\\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, \\\\"application/json\\\\")\\\\n            };\\\\n\\\\n            _mockHttpMessageHandler\\\\n                .Protected()\\\\n                .Setup<Task<HttpResponseMessage>>(\\\\n                    \\\\"SendAsync\\\\",\\\\n                    ItExpr.IsAny<HttpRequestMessage>(),\\\\n                    ItExpr.IsAny<CancellationToken>())\\\\n                .ReturnsAsync(httpResponse);\\\\n\\\\n            var httpClient = new HttpClient(_mockHttpMessageHandler.Object);\\\\n            using var client = new LawMaticsClient(_credentials, httpClient, _options, _mockLogger.Object);\\\\n\\\\n            // Act\\\\n            var result = await client.GetAsync<ApiResponse<object>>(\\\\"test\\\\");\\\\n\\\\n            // Assert\\\\n            Assert.NotNull(result);\\\\n            Assert.NotNull(result.Data);\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public async Task PostAsync_WithValidData_ReturnsResponse()\\\\n        {\\\\n            // Arrange\\\\n            var requestData = new { Name = \\\\"Test\\\\" };\\\\n            var expectedData = new { Id = 1, Name = \\\\"Test\\\\" };\\\\n            var expectedResponse = new ApiResponse<object> { Data = expectedData };\\\\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\\\\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.Created)\\\\n            {\\\\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, \\\\"application/json\\\\")\\\\n            };\\\\n\\\\n            _mockHttpMessageHandler\\\\n                .Protected()\\\\n                .Setup<Task<HttpResponseMessage>>(\\\\n                    \\\\"SendAsync\\\\",\\\\n                    ItExpr.IsAny<HttpRequestMessage>(),\\\\n                    ItExpr.IsAny<CancellationToken>())\\\\n                .ReturnsAsync(httpResponse);\\\\n\\\\n            var httpClient = new HttpClient(_mockHttpMessageHandler.Object);\\\\n            using var client = new LawMaticsClient(_credentials, httpClient, _options, _mockLogger.Object);\\\\n\\\\n            // Act\\\\n            var result = await client.PostAsync<ApiResponse<object>>(\\\\"test\\\\", requestData);\\\\n\\\\n            // Assert\\\\n            Assert.NotNull(result);\\\\n            Assert.NotNull(result.Data);\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public async Task PutAsync_WithValidData_ReturnsResponse()\\\\n        {\\\\n            // Arrange\\\\n            var requestData = new { Id = 1, Name = \\\\"Updated\\\\" };\\\\n            var expectedResponse = new ApiResponse<object> { Data = requestData };\\\\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\\\\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\\\\n            {\\\\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, \\\\"application/json\\\\")\\\\n            };\\\\n\\\\n            _mockHttpMessageHandler\\\\n                .Protected()\\\\n                .Setup<Task<HttpResponseMessage>>(\\\\n                    \\\\"SendAsync\\\\",\\\\n                    ItExpr.IsAny<HttpRequestMessage>(),\\\\n                    ItExpr.IsAny<CancellationToken>())\\\\n                .ReturnsAsync(httpResponse);\\\\n\\\\n            var httpClient = new HttpClient(_mockHttpMessageHandler.Object);\\\\n            using var client = new LawMaticsClient(_credentials, httpClient, _options, _mockLogger.Object);\\\\n\\\\n            // Act\\\\n            var result = await client.PutAsync<ApiResponse<object>>(\\\\"test/1\\\\", requestData);\\\\n\\\\n            // Assert\\\\n            Assert.NotNull(result);\\\\n            Assert.NotNull(result.Data);\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public async Task DeleteAsync_WithValidEndpoint_ReturnsResponse()\\\\n        {\\\\n            // Arrange\\\\n            var expectedResponse = new ApiResponse<object> { Data = null };\\\\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\\\\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.NoContent)\\\\n            {\\\\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, \\\\"application/json\\\\")\\\\n            };\\\\n\\\\n            _mockHttpMessageHandler\\\\n                .Protected()\\\\n                .Setup<Task<HttpResponseMessage>>(\\\\n                    \\\\"SendAsync\\\\",\\\\n                    ItExpr.IsAny<HttpRequestMessage>(),\\\\n                    ItExpr.IsAny<CancellationToken>())\\\\n                .ReturnsAsync(httpResponse);\\\\n\\\\n            var httpClient = new HttpClient(_mockHttpMessageHandler.Object);\\\\n            using var client = new LawMaticsClient(_credentials, httpClient, _options, _mockLogger.Object);\\\\n\\\\n            // Act\\\\n            var result = await client.DeleteAsync<ApiResponse<object>>(\\\\"test/1\\\\");\\\\n\\\\n            // Assert\\\\n            Assert.NotNull(result);\\\\n        }\\\\n\\\\n        [Fact]\\\\n        public void Dispose_CanBeCalledMultipleTimes_DoesNotThrow()\\\\n        {\\\\n            // Arrange & Act\\\\n            using var client = new LawMaticsClient(_credentials, _options, _mockLogger.Object);\\\\n            \\\\n            // Assert - should not throw\\\\n            Assert.True(true);\\\\n        }\\\\n\\\\n        public void Dispose()\\\\n        {\\\\n            // Cleanup handled by using statements in tests\\\\n        }\\\\n    }\\\\n}",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}