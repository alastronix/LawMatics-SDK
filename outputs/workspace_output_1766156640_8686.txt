            
            return response.Data ?? throw new Exceptions.LawMaticsNotFoundException("User not found.", 404, null, null, "User", id.ToString());
        }

        /// <summary>
        /// Creates a new user.
        /// </summary>
        /// <param name="user">The user data to create.</param>
        /// <param name="cancellationToken">The cancellation token.</param>
        /// <returns>The created user details.</returns>
        public async Task<User> CreateUserAsync(CreateUserRequest user, CancellationToken cancellationToken = default)
        {
            if (user == null)
                throw new ArgumentNullException(nameof(user));

            if (string.IsNullOrWhiteSpace(user.Email))
                throw new ArgumentException("User email is required.", nameof(user));

            if (string.IsNullOrWhiteSpace(user.FirstName))
                throw new ArgumentException("User first name is required.", nameof(user));

            if (string.IsNullOrWhiteSpace(user.LastName))
                throw new ArgumentException("User last name is required.", nameof(user));

            var endpoint = "users";
            var response = await _client.PostAsync<ApiResponse<User>>(endpoint, user, cancellationToken);
            
            return response.Data ?? throw new Exceptions.LawMaticsException("Failed to create user: No data returned from API.");
        }

