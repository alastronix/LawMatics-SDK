{'role': 'assistant', 'content': '\nNow let me implement the SubtasksClient:\n\n<function_calls>\n<create-file file_path="LawMatics.SDK/Clients/SubtasksClient.cs">\nusing LawMatics.SDK.Configuration;\nusing LawMatics.SDK.Models;\nusing Microsoft.Extensions.Logging;\n\nnamespace LawMatics.SDK.Clients\n{\n    /// <summary>\n    /// Client for managing subtasks in the LawMatics API.\n    /// </summary>\n    public class SubtasksClient : BaseClient\n    {\n        public SubtasksClient(HttpClient httpClient, LawMaticsClientOptions options, ILogger<SubtasksClient> logger)\n            : base(httpClient, options, logger)\n        {\n        }\n\n        /// <summary>\n        /// Gets all subtasks with optional pagination and filtering.\n        /// </summary>\n        /// <param name="page">Page number for pagination (default: 1).</param>\n        /// <param name="pageSize">Number of items per page (default: 20).</param>\n        /// <param name="taskId">Filter by parent task ID.</param>\n        /// <param name="isCompleted">Filter by completion status.</param>\n        /// <param name="title">Filter by subtask title.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>A paged list of subtasks.</returns>\n        public async Task<PagedResponse<Subtask>> GetSubtasksAsync(\n            int page = 1,\n            int pageSize = 20,\n            int? taskId = null,\n            bool? isCompleted = null,\n            string? title = null,\n            CancellationToken cancellationToken = default)\n        {\n            var parameters = new Dictionary<string, string>\n            {\n                ["page"] = page.ToString(),\n                ["page_size"] = pageSize.ToString()\n            };\n\n            if (taskId.HasValue)\n                parameters["task_id"] = taskId.Value.ToString();\n\n            if (isCompleted.HasValue)\n                parameters["is_completed"] = isCompleted.Value.ToString();\n\n            if (!string.IsNullOrEmpty(title))\n                parameters["title"] = title;\n\n            return await GetAsync<PagedResponse<Subtask>>("subtasks", parameters, cancellationToken);\n        }\n\n        /// <summary>\n        /// Gets a specific subtask by ID.\n        /// </summary>\n        /// <param name="id">The subtask ID.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>The subtask details.</returns>\n        public async Task<Subtask?> GetSubtaskAsync(int id, CancellationToken cancellationToken = default)\n        {\n            return await GetAsync<Subtask>($"subtasks/{id}", cancellationToken: cancellationToken);\n        }\n\n        /// <summary>\n        /// Creates a new subtask.\n        /// </summary>\n        /// <param name="request">The subtask creation request.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>The created subtask.</returns>\n        public async Task<Subtask?> CreateSubtaskAsync(CreateSubtaskRequest request, CancellationToken cancellationToken = default)\n        {\n            return await PostAsync<Subtask>("subtasks", request, cancellationToken);\n        }\n\n        /// <summary>\n        /// Updates an existing subtask.\n        /// </summary>\n        /// <param name="id">The subtask ID.</param>\n        /// <param name="request">The subtask update request.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>The updated subtask.</returns>\n        public async Task<Subtask?> UpdateSubtaskAsync(int id, UpdateSubtaskRequest request, CancellationToken cancellationToken = default)\n        {\n            return await PutAsync<Subtask>($"subtasks/{id}", request, cancellationToken);\n        }\n\n        /// <summary>\n        /// Deletes a subtask.\n        /// </summary>\n        /// <param name="id">The subtask ID.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>True if deletion was successful.</returns>\n        public async Task<bool> DeleteSubtaskAsync(int id, CancellationToken cancellationToken = default)\n        {\n            return await DeleteAsync($"subtasks/{id}", cancellationToken);\n        }\n\n        /// <summary>\n        /// Gets subtasks for a specific task.\n        /// </summary>\n        /// <param name="taskId">The parent task ID.</param>\n        /// <param name="page">Page number for pagination (default: 1).</param>\n        /// <param name="pageSize">Number of items per page (default: 20).</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>A paged list of subtasks for the task.</returns>\n        public async Task<PagedResponse<Subtask>> GetSubtasksByTaskAsync(\n            int taskId,\n            int page = 1,\n            int pageSize = 20,\n            CancellationToken cancellationToken = default)\n        {\n            return await GetSubtasksAsync(page, pageSize, taskId: taskId, cancellationToken: cancellationToken);\n        }\n\n        /// <summary>\n        /// Gets completed subtasks for a task.\n        /// </summary>\n        /// <param name="taskId">The parent task ID.</param>\n        /// <param name="page">Page number for pagination (default: 1).</param>\n        /// <param name="pageSize">Number of items per page (default: 20).</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>A paged list of completed subtasks for the task.</returns>\n        public async Task<PagedResponse<Subtask>> GetCompletedSubtasksByTaskAsync(\n            int taskId,\n            int page = 1,\n            int pageSize = 20,\n            CancellationToken cancellationToken = default)\n        {\n            return await GetSubtasksAsync(page, pageSize, taskId: taskId, isCompleted: true, cancellationToken: cancellationToken);\n        }\n\n        /// <summary>\n        /// Gets incomplete subtasks for a task.\n        /// </summary>\n        /// <param name="taskId">The parent task ID.</param>\n        /// <param name="page">Page number for pagination (default: 1).</param>\n        /// <param name="pageSize">Number of items per page (default: 20).</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>A paged list of incomplete subtasks for the task.</returns>\n        public async Task<PagedResponse<Subtask>> GetIncompleteSubtasksByTaskAsync(\n            int taskId,\n            int page = 1,\n            int pageSize = 20,\n            CancellationToken cancellationToken = default)\n        {\n            return await GetSubtasksAsync(page, pageSize, taskId: taskId, isCompleted: false, cancellationToken: cancellationToken);\n        }\n\n        /// <summary>\n        /// Marks a subtask as completed.\n        /// </summary>\n        /// <param name="id">The subtask ID.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>The updated subtask.</returns>\n        public async Task<Subtask?> CompleteSubtaskAsync(int id, CancellationToken cancellationToken = default)\n        {\n            return await PostAsync<Subtask>($"subtasks/{id}/complete", null, cancellationToken);\n        }\n\n        /// <summary>\n        /// Marks a subtask as incomplete.\n        /// </summary>\n        /// <param name="id">The subtask ID.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>The updated subtask.</returns>\n        public async Task<Subtask?> ReopenSubtaskAsync(int id, CancellationToken cancellationToken = default)\n        {\n            return await PostAsync<Subtask>($"subtasks/{id}/reopen", null, cancellationToken);\n        }\n\n        /// <summary>\n        /// Bulk creates subtasks for a task.\n        /// </summary>\n        /// <param name="taskId">The parent task ID.</param>\n        /// <param name="requests">List of subtask creation requests.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>A list of created subtasks.</returns>\n        public async Task<List<Subtask>> BulkCreateSubtasksAsync(\n            int taskId,\n            List<CreateSubtaskRequest> requests,\n            CancellationToken cancellationToken = default)\n        {\n            var bulkRequest = new\n            {\n                task_id = taskId,\n                subtasks = requests\n            };\n\n            return await PostAsync<List<Subtask>>("subtasks/bulk", bulkRequest, cancellationToken) ?? new List<Subtask>();\n        }\n\n        /// <summary>\n        /// Bulk completes subtasks for a task.\n        /// </summary>\n        /// <param name="taskId">The parent task ID.</param>\n        /// <param name="subtaskIds">List of subtask IDs to complete.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>True if bulk completion was successful.</returns>\n        public async Task<bool> BulkCompleteSubtasksAsync(\n            int taskId,\n            List<int> subtaskIds,\n            CancellationToken cancellationToken = default)\n        {\n            var bulkRequest = new\n            {\n                task_id = taskId,\n                subtask_ids = subtaskIds\n            };\n\n            var response = await PostAsync<object>("subtasks/bulk-complete", bulkRequest, cancellationToken);\n            return response != null;\n        }\n\n        /// <summary>\n        /// Bulk deletes subtasks for a task.\n        /// </summary>\n        /// <param name="taskId">The parent task ID.</param>\n        /// <param name="subtaskIds">List of subtask IDs to delete.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>True if bulk deletion was successful.</returns>\n        public async Task<bool> BulkDeleteSubtasksAsync(\n            int taskId,\n            List<int> subtaskIds,\n            CancellationToken cancellationToken = default)\n        {\n            var bulkRequest = new\n            {\n                task_id = taskId,\n                subtask_ids = subtaskIds\n            };\n\n            var response = await PostAsync<object>("subtasks/bulk-delete", bulkRequest, cancellationToken);\n            return response != null;\n        }\n\n        /// <summary>\n        /// Gets subtask statistics for a task.\n        /// </summary>\n        /// <param name="taskId">The parent task ID.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>Subtask statistics for the task.</returns>\n        public async Task<SubtaskStatistics?> GetSubtaskStatisticsByTaskAsync(int taskId, CancellationToken cancellationToken = default)\n        {\n            return await GetAsync<SubtaskStatistics>($"subtasks/tasks/{taskId}/statistics", cancellationToken: cancellationToken);\n        }\n\n        /// <summary>\n        /// Searches subtasks by title or description.\n        /// </summary>\n        /// <param name="query">Search query.</param>\n        /// <param name="taskId">Filter by parent task ID (optional).</param>\n        /// <param name="page">Page number for pagination (default: 1).</param>\n        /// <param name="pageSize">Number of items per page (default: 20).</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>A paged list of subtasks matching the search query.</returns>\n        public async Task<PagedResponse<Subtask>> SearchSubtasksAsync(\n            string query,\n            int? taskId = null,\n            int page = 1,\n            int pageSize = 20,\n            CancellationToken cancellationToken = default)\n        {\n            var parameters = new Dictionary<string, string>\n            {\n                ["page"] = page.ToString(),\n                ["page_size"] = pageSize.ToString(),\n                ["search"] = query\n            };\n\n            if (taskId.HasValue)\n                parameters["task_id"] = taskId.Value.ToString();\n\n            return await GetAsync<PagedResponse<Subtask>>("subtasks", parameters, cancellationToken);\n        }\n\n        /// <summary>\n        /// Reorders subtasks within a task.\n        /// </summary>\n        /// <param name="taskId">The parent task ID.</param>\n        /// <param name="subtaskOrders">List of subtask IDs and their new order.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>True if the reorder was successful.</returns>\n        public async Task<bool> ReorderSubtasksAsync(\n            int taskId,\n            List<SubtaskOrder> subtaskOrders,\n            CancellationToken cancellationToken = default)\n        {\n            var request = new\n            {\n                task_id = taskId,\n                subtasks = subtaskOrders\n            };\n\n            var response = await PutAsync<object>("subtasks/reorder", request, cancellationToken);\n            return response != null;\n        }\n\n        /// <summary>\n        /// Duplicates a subtask.\n        /// </summary>\n        /// <param name="id">The subtask ID to duplicate.</param>\n        /// <param name="newTitle">The title for the duplicated subtask.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>The duplicated subtask.</returns>\n        public async Task<Subtask?> DuplicateSubtaskAsync(\n            int id,\n            string newTitle,\n            CancellationToken cancellationToken = default)\n        {\n            var request = new { title = newTitle };\n            return await PostAsync<Subtask>($"subtasks/{id}/duplicate", request, cancellationToken);\n        }\n\n        /// <summary>\n        /// Validates subtask data.\n        /// </summary>\n        /// <param name="request">The subtask request to validate.</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>Validation result.</returns>\n        public async Task<SubtaskValidationResult?> ValidateSubtaskAsync(\n            CreateSubtaskRequest request,\n            CancellationToken cancellationToken = default)\n        {\n            return await PostAsync<SubtaskValidationResult>("subtasks/validate", request, cancellationToken);\n        }\n\n        /// <summary>\n        /// Exports subtasks to CSV.\n        /// </summary>\n        /// <param name="taskId">Filter by parent task ID (optional).</param>\n        /// <param name="isCompleted">Filter by completion status (optional).</param>\n        /// <param name="cancellationToken">Cancellation token.</param>\n        /// <returns>The CSV file content.</returns>\n        public async Task<byte[]> ExportSubtasksToCsvAsync(\n            int? taskId = null,\n            bool? isCompleted = null,\n            CancellationToken cancellationToken = default)\n        {\n            var parameters = new Dictionary<string, string>\n            {\n                ["format"] = "csv"\n            };\n\n            if (taskId.HasValue)\n                parameters["task_id"] = taskId.Value.ToString();\n\n            if (isCompleted.HasValue)\n                parameters["is_completed"] = isCompleted.Value.ToString();\n\n            return await GetFileAsync("subtasks/export", parameters, cancellationToken);\n        }\n    }\n\n    /// <summary>\n    /// Represents subtask statistics.\n    /// </summary>\n    public class SubtaskStatistics\n    {\n        /// <summary>\n        /// Gets or sets the task ID.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("task_id")]\n        public int TaskId { get; set; }\n\n        /// <summary>\n        /// Gets or sets the total subtasks.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("total_subtasks")]\n        public int TotalSubtasks { get; set; }\n\n        /// <summary>\n        /// Gets or sets the completed subtasks.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("completed_subtasks")]\n        public int CompletedSubtasks { get; set; }\n\n        /// <summary>\n        /// Gets or sets the incomplete subtasks.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("incomplete_subtasks")]\n        public int IncompleteSubtasks { get; set; }\n\n        /// <summary>\n        /// Gets or sets the completion percentage.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("completion_percentage")]\n        public decimal CompletionPercentage { get; set; }\n\n        /// <summary>\n        /// Gets or sets the total completion time (hours).\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("total_completion_time_hours")]\n        public decimal TotalCompletionTimeHours { get; set; }\n\n        /// <summary>\n        /// Gets or sets the average completion time (hours).\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("average_completion_time_hours")]\n        public decimal AverageCompletionTimeHours { get; set; }\n    }\n\n    /// <summary>\n    /// Represents subtask validation result.\n    /// </summary>\n    public class SubtaskValidationResult\n    {\n        /// <summary>\n        /// Gets or sets whether the subtask is valid.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("is_valid")]\n        public bool IsValid { get; set; }\n\n        /// <summary>\n        /// Gets or sets validation errors.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("errors")]\n        public List<string> Errors { get; set; } = new();\n\n        /// <summary>\n        /// Gets or sets validation warnings.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("warnings")]\n        public List<string> Warnings { get; set; } = new();\n    }\n\n    /// <summary>\n    /// Represents subtask order.\n    /// </summary>\n    public class SubtaskOrder\n    {\n        /// <summary>\n        /// Gets or sets the subtask ID.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("subtask_id")]\n        public int SubtaskId { get; set; }\n\n        /// <summary>\n        /// Gets or sets the order position.\n        /// </summary>\n        [System.Text.Json.Serialization.JsonPropertyName("order")]\n        public int Order { get; set; }\n    }\n}\n</create-file>\n</function_calls>'}