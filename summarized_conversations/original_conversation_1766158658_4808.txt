{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "# LawMatics C# API SDK\\\\n\\\\nA comprehensive C# SDK for interacting with the LawMatics API, providing a clean, type-safe interface for managing contacts, companies, matters, events, files, and more.\\\\n\\\\n## Features\\\\n\\\\n- **Complete API Coverage**: Full support for all major LawMatics API endpoints:\\\\n  - **Contacts**: CRUD operations, search, and management\\\\n  - **Companies**: Organization and company management\\\\n  - **Matters**: Case and prospect management with sub-statuses\\\\n  - **Events**: Appointments and scheduling with locations and types\\\\n  - **Files**: File upload, download, and folder management\\\\n  - **Folders**: Hierarchical folder structure and organization\\\\n  - **Email Campaigns**: Campaign creation, sending, and statistics\\\\n  - **Payments**: Payment and invoice management\\\\n  - **Custom Fields**: Dynamic field management\\\\n  - **Custom Forms**: Form creation and management\\\\n  - **Notes**: Note-taking and documentation\\\\n  - **Users**: User management and administration\\\\n- **OAuth 2.0 Authentication**: Built-in support for secure authentication and token refresh\\\\n- **Async/Await Support**: Modern async patterns for all API operations\\\\n- **Comprehensive Error Handling**: Custom exceptions with detailed error information\\\\n- **Retry Logic**: Automatic retry for transient failures\\\\n- **File Management**: Complete file upload/download functionality with streaming support\\\\n- **Extensible Logging**: Integration with Microsoft.Extensions.Logging\\\\n- **Dependency Injection Ready**: Designed for easy integration with DI containers\\\\n- **Unit Tested**: Comprehensive test suite with high code coverage\\\\n\\\\n## Installation\\\\n\\\\n### NuGet Package\\\\n\\\\n```bash\\\\ndotnet add package LawMatics.SDK\\\\n```\\\\n\\\\n### Manual Installation\\\\n\\\\n1. Download the latest release from the [Releases page](https://github.com/your-repo/LawMatics.SDK/releases)\\\\n2. Add reference to `LawMatics.SDK.dll` in your project\\\\n3. Ensure you have the required dependencies:\\\\n   - .NET 9.0 or later\\\\n   - System.Text.Json\\\\n   - Microsoft.Extensions.Http\\\\n\\\\n## Quick Start\\\\n\\\\n```csharp\\\\nusing LawMatics.SDK;\\\\nusing LawMatics.SDK.Authentication;\\\\nusing LawMatics.SDK.Configuration;\\\\n\\\\n// Create credentials with your OAuth access token\\\\nvar credentials = new LawMaticsCredentials(\\\\"your-access-token\\\\");\\\\n\\\\n// Configure the client\\\\nvar options = LawMaticsClientOptions.Production;\\\\n\\\\n// Create the client\\\\nusing var client = new LawMaticsClient(credentials, options);\\\\n\\\\n// Get a contact by ID\\\\nvar contact = await client.Contacts.GetContactAsync(123);\\\\n\\\\nConsole.WriteLine($\\\\"Contact: {contact.FirstName} {contact.LastName} - {contact.Email}\\\\");\\\\n```\\\\n\\\\n## Authentication\\\\n\\\\n### OAuth 2.0 Setup\\\\n\\\\n1. **Get API Credentials**:\\\\n   - Contact LawMatics support at `api@lawmatics.com` to enable Developer Settings\\\\n   - Create a Developer App to get your Client ID and Client Secret\\\\n\\\\n2. **Obtain Access Token**:\\\\n```csharp\\\\nvar credentials = new LawMaticsCredentials(\\\\n    clientId: \\\\"your-client-id\\\\",\\\\n    clientSecret: \\\\"your-client-secret\\\\",\\\\n    accessToken: \\\\"your-access-token\\\\",\\\\n    refreshToken: \\\\"your-refresh-token\\\\",\\\\n    expiresAt: DateTime.UtcNow.AddHours(1)\\\\n);\\\\n```\\\\n\\\\n3. **Automatic Token Refresh**:\\\\nThe SDK automatically handles token refresh when credentials expire:\\\\n\\\\n```csharp\\\\n// The SDK will refresh tokens automatically when needed\\\\nif (credentials.IsExpired)\\\\n{\\\\n    // Token will be refreshed on the next API call\\\\n    var result = await client.Contacts.GetContactsAsync();\\\\n}\\\\n```\\\\n\\\\n## Configuration\\\\n\\\\n### Environment-Specific Options\\\\n\\\\n```csharp\\\\n// Development environment\\\\nvar devOptions = LawMaticsClientOptions.Development;\\\\n\\\\n// Production environment\\\\nvar prodOptions = LawMaticsClientOptions.Production;\\\\n\\\\n// Custom configuration\\\\nvar customOptions = new LawMaticsClientOptions\\\\n{\\\\n    BaseUrl = \\\\"https://api.lawmatics.com\\\\",\\\\n    ApiVersion = \\\\"v1\\\\",\\\\n    TimeoutSeconds = 60,\\\\n    MaxRetryAttempts = 3,\\\\n    RetryDelayMilliseconds = 1000,\\\\n    EnableRetry = true,\\\\n    IncludeErrorDetails = true,\\\\n    EnableLogging = true\\\\n};\\\\n```\\\\n\\\\n### Custom Headers\\\\n\\\\n```csharp\\\\nvar options = new LawMaticsClientOptions();\\\\noptions.CustomHeaders[\\\\"X-Custom-Header\\\\"] = \\\\"Custom-Value\\\\";\\\\n\\\\nusing var client = new LawMaticsClient(credentials, options);\\\\n```\\\\n\\\\n## API Usage Examples\\\\n\\\\n### Contacts Management\\\\n\\\\n```csharp\\\\n// Get all contacts with pagination\\\\nvar contactsResponse = await client.Contacts.GetContactsAsync();\\\\nforeach (var contact in contactsResponse.Data)\\\\n{\\\\n    Console.WriteLine($\\\\"{contact.FirstName} {contact.LastName}\\\\");\\\\n}\\\\n\\\\n// Get contacts with filters\\\\nvar filteredContacts = await client.Contacts.GetContactsAsync(new GetContactsParameters\\\\n{\\\\n    Search = \\\\"John\\\\",\\\\n    ContactType = \\\\"Client\\\\",\\\\n    Page = 1,\\\\n    PerPage = 25\\\\n});\\\\n\\\\n// Get a specific contact\\\\nvar contact = await client.Contacts.GetContactAsync(123);\\\\n\\\\n// Create a new contact\\\\nvar newContact = await client.Contacts.CreateContactAsync(new CreateContactRequest\\\\n{\\\\n    FirstName = \\\\"John\\\\",\\\\n    LastName = \\\\"Doe\\\\",\\\\n    Email = \\\\"john.doe@example.com\\\\",\\\\n    Phone = \\\\"555-1234\\\\",\\\\n    Company = \\\\"Acme Corp\\\\",\\\\n    Address = new Address\\\\n    {\\\\n        Street1 = \\\\"123 Main St\\\\",\\\\n        City = \\\\"Anytown\\\\",\\\\n        State = \\\\"CA\\\\",\\\\n        PostalCode = \\\\"12345\\\\"\\\\n    }\\\\n});\\\\n\\\\n// Update a contact\\\\nvar updatedContact = await client.Contacts.UpdateContactAsync(123, new UpdateContactRequest\\\\n{\\\\n    FirstName = \\\\"John\\\\",\\\\n    LastName = \\\\"Smith\\\\",\\\\n    Phone = \\\\"555-5678\\\\"\\\\n});\\\\n\\\\n// Delete a contact\\\\nawait client.Contacts.DeleteContactAsync(123);\\\\n```\\\\n\\\\n### Companies Management\\\\n\\\\n```csharp\\\\n// Get all companies\\\\nvar companies = await client.Companies.GetCompaniesAsync();\\\\n\\\\n// Get companies with search\\\\nvar searchResults = await client.Companies.GetCompaniesAsync(new FilterParameters\\\\n{\\\\n    Search = \\\\"Acme\\\\"\\\\n});\\\\n```\\\\n\\\\n### Files Management\\\\n\\\\n```csharp\\\\n// Get all files\\\\nvar files = await client.Files.GetFilesAsync();\\\\n\\\\n// Upload a file\\\\nvar uploadedFile = await client.Files.UploadFileAsync(\\\\"path/to/file.pdf\\\\");\\\\n\\\\n// Upload a file with metadata\\\\nvar uploadedFile = await client.Files.UploadFileAsync(fileStream, \\\\"document.pdf\\\\", \\\\"application/pdf\\\\", folderId: 123, description: \\\\"Legal document\\\\");\\\\n\\\\n// Download a file\\\\nvar fileStream = await client.Files.DownloadFileAsync(123);\\\\n\\\\n// Download a file to local path\\\\nvar localPath = await client.Files.DownloadFileAsync(123, \\\\"C:/downloads/document.pdf\\\\");\\\\n\\\\n// Get files by folder\\\\nvar folderFiles = await client.Files.GetFilesByFolderAsync(456);\\\\n\\\\n// Search files by name\\\\nvar searchResults = await client.Files.SearchFilesByNameAsync(\\\\"contract\\\\");\\\\n\\\\n// Update file metadata\\\\nvar updatedFile = await client.Files.UpdateFileAsync(123, new UpdateFileRequest\\\\n{\\\\n    Description = \\\\"Updated description\\\\",\\\\n    IsPublic = true\\\\n});\\\\n\\\\n// Delete a file\\\\nawait client.Files.DeleteFileAsync(123);\\\\n```\\\\n\\\\n### Folder Operations\\\\n\\\\n```csharp\\\\n// Get all folders\\\\nvar folders = await client.Folders.GetFoldersAsync();\\\\n\\\\n// Create a new folder\\\\nvar newFolder = await client.Folders.CreateFolderAsync(new CreateFolderRequest\\\\n{\\\\n    Name = \\\\"Client Documents\\\\",\\\\n    Description = \\\\"Folder for client-related documents\\\\",\\\\n    ParentId = null\\\\n});\\\\n\\\\n// Get folder details\\\\nvar folder = await client.Folders.GetFolderAsync(123);\\\\n\\\\n// Update folder\\\\nvar updatedFolder = await client.Folders.UpdateFolderAsync(123, new UpdateFolderRequest\\\\n{\\\\n    Name = \\\\"Updated Folder Name\\\\",\\\\n    Description = \\\\"Updated description\\\\"\\\\n});\\\\n\\\\n// Delete folder\\\\nawait client.Folders.DeleteFolderAsync(123);\\\\n```\\\\n\\\\n### Email Campaigns\\\\n\\\\n```csharp\\\\n// Get all campaigns\\\\nvar campaigns = await client.EmailCampaigns.GetCampaignsAsync();\\\\n\\\\n// Create a campaign\\\\nvar newCampaign = await client.EmailCampaigns.CreateCampaignAsync(new CreateCampaignRequest\\\\n{\\\\n    Name = \\\\"Welcome Campaign\\\\",\\\\n    Subject = \\\\"Welcome to our firm\\\\",\\\\n    TemplateId: 123,\\\\n    ListIds = new[] { 456, 789 }\\\\n});\\\\n\\\\n// Get campaign details\\\\nvar campaign = await client.EmailCampaigns.GetCampaignAsync(123);\\\\n\\\\n// Send campaign\\\\nawait client.EmailCampaigns.SendCampaignAsync(123);\\\\n\\\\n// Get campaign statistics\\\\nvar stats = await client.EmailCampaigns.GetCampaignStatsAsync(123);\\\\n```\\\\n\\\\n### Payment Processing\\\\n\\\\n```csharp\\\\n// Get all payments\\\\nvar payments = await client.Payments.GetPaymentsAsync();\\\\n\\\\n// Create a payment\\\\nvar newPayment = await client.Payments.CreatePaymentAsync(new CreatePaymentRequest\\\\n{\\\\n    ContactId: 123,\\\\n    Amount = 1500.00m,\\\\n    Description = \\\\"Legal consultation fee\\\\",\\\\n    DueDate = DateTime.UtcNow.AddDays(30)\\\\n});\\\\n\\\\n// Get payment details\\\\nvar payment = await client.Payments.GetPaymentAsync(123);\\\\n\\\\n// Update payment\\\\nvar updatedPayment = await client.Payments.UpdatePaymentAsync(123, new UpdatePaymentRequest\\\\n{\\\\n    Amount = 1200.00m,\\\\n    Status = \\\\"Partial\\\\"\\\\n});\\\\n\\\\n// Process payment\\\\nawait client.Payments.ProcessPaymentAsync(123, new ProcessPaymentRequest\\\\n{\\\\n    PaymentMethod = \\\\"CreditCard\\\\",\\\\n    TransactionId = \\\\"txn_123456\\\\"\\\\n});\\\\n```\\\\n\\\\n### Matters (Prospects) Management\\\\n\\\\n```csharp\\\\n// Get all matters\\\\nvar matters = await client.Matters.GetMattersAsync();\\\\n\\\\n// Get matters with filters\\\\nvar activeMatters = await client.Matters.GetMattersAsync(new FilterParameters\\\\n{\\\\n    Status = \\\\"Active\\\\"\\\\n});\\\\n```\\\\n\\\\n### Events (Appointments) Management\\\\n\\\\n```csharp\\\\n// Get all events\\\\nvar events = await client.Events.GetEventsAsync();\\\\n\\\\n// Get events for a specific date range\\\\nvar upcomingEvents = await client.Events.GetEventsAsync(new FilterParameters\\\\n{\\\\n    StartDate = DateTime.Today,\\\\n    EndDate = DateTime.Today.AddDays(7)\\\\n});\\\\n```\\\\n\\\\n## Error Handling\\\\n\\\\nThe SDK provides comprehensive error handling with custom exception types:\\\\n\\\\n```csharp\\\\ntry\\\\n{\\\\n    var contact = await client.Contacts.GetContactAsync(123);\\\\n}\\\\ncatch (LawMaticsNotFoundException ex)\\\\n{\\\\n    Console.WriteLine($\\\\"Contact not found: {ex.Message}\\\\");\\\\n}\\\\ncatch (LawMaticsAuthenticationException ex)\\\\n{\\\\n    Console.WriteLine($\\\\"Authentication failed: {ex.Message}\\\\");\\\\n}\\\\ncatch (LawMaticsRateLimitException ex)\\\\n{\\\\n    Console.WriteLine($\\\\"Rate limit exceeded: {ex.Message}\\\\");\\\\n    Console.WriteLine($\\\\"Retry after: {ex.RetryAfter}\\\\");\\\\n}\\\\ncatch (LawMaticsApiException ex)\\\\n{\\\\n    Console.WriteLine($\\\\"API error: {ex.Message}\\\\");\\\\n    Console.WriteLine($\\\\"Status code: {ex.StatusCode}\\\\");\\\\n    Console.WriteLine($\\\\"Error code: {ex.ErrorCode}\\\\");\\\\n}\\\\ncatch (LawMaticsException ex)\\\\n{\\\\n    Console.WriteLine($\\\\"General LawMatics error: {ex.Message}\\\\");\\\\n}\\\\n```\\\\n\\\\n## Dependency Injection\\\\n\\\\n### ASP.NET Core Integration\\\\n\\\\n```csharp\\\\n// In Program.cs or Startup.cs\\\\nbuilder.Services.AddLawMaticsClient(options =>\\\\n{\\\\n    options.BaseUrl = \\\\"https://api.lawmatics.com\\\\";\\\\n    options.TimeoutSeconds = 30;\\\\n}, credentials =>\\\\n{\\\\n    credentials.AccessToken = configuration[\\\\"LawMatics:AccessToken\\\\"];\\\\n    credentials.ClientId = configuration[\\\\"LawMatics:ClientId\\\\"];\\\\n    credentials.ClientSecret = configuration[\\\\"LawMatics:ClientSecret\\\\"];\\\\n});\\\\n```\\\\n\\\\n### Manual DI Registration\\\\n\\\\n```csharp\\\\n// Register the client as a singleton or scoped service\\\\nservices.AddSingleton<LawMaticsClient>(provider =>\\\\n{\\\\n    var credentials = new LawMaticsCredentials(configuration[\\\\"LawMatics:AccessToken\\\\"]);\\\\n    var options = LawMaticsClientOptions.Production;\\\\n    return new LawMaticsClient(credentials, options);\\\\n});\\\\n```\\\\n\\\\n## Advanced Usage\\\\n\\\\n### Custom Logging\\\\n\\\\n```csharp\\\\nusing Microsoft.Extensions.Logging;\\\\n\\\\n// Configure logging\\\\nvar loggerFactory = LoggerFactory.Create(builder =>\\\\n    builder.AddConsole().SetMinimumLevel(LogLevel.Debug));\\\\n\\\\nvar logger = loggerFactory.CreateLogger<LawMaticsClient>();\\\\n\\\\nusing var client = new LawMaticsClient(credentials, options, logger);\\\\n```\\\\n\\\\n### HTTP Message Handler Customization\\\\n\\\\n```csharp\\\\n// Create a custom message handler\\\\nvar customHandler = new CustomHttpMessageHandler();\\\\n\\\\nusing var client = new LawMaticsClient(credentials, customHandler, options);\\\\n```\\\\n\\\\n### Request/Response Interception\\\\n\\\\n```csharp\\\\n// Add custom request headers\\\\nclient.CustomHeaders[\\\\"X-Request-Source\\\\"] = \\\\"MyApp\\\\";\\\\n\\\\n// Monitor API calls\\\\nclient.RequestSent += (sender, args) =>\\\\n{\\\\n    Console.WriteLine($\\\\"Request sent: {args.Method} {args.Uri}\\\\");\\\\n};\\\\n\\\\nclient.ResponseReceived += (sender, args) =>\\\\n{\\\\n    Console.WriteLine($\\\\"Response received: {args.StatusCode}\\\\");\\\\n};\\\\n```\\\\n\\\\n## Models and DTOs\\\\n\\\\nThe SDK includes comprehensive models for all LawMatics entities:\\\\n\\\\n### Contact Model\\\\n```csharp\\\\npublic class Contact\\\\n{\\\\n    public int Id { get; set; }\\\\n    public string? FirstName { get; set; }\\\\n    public string? LastName { get; set; }\\\\n    public string? Email { get; set; }\\\\n    public string? Phone { get; set; }\\\\n    public string? MobilePhone { get; set; }\\\\n    public string? Company { get; set; }\\\\n    public Address? Address { get; set; }\\\\n    public DateTime? DateOfBirth { get; set; }\\\\n    public string? ContactType { get; set; }\\\\n    public string? LeadStatus { get; set; }\\\\n    public Dictionary<string, object>? CustomFields { get; set; }\\\\n    // ... additional properties\\\\n}\\\\n```\\\\n\\\\n### Address Model\\\\n```csharp\\\\npublic class Address\\\\n{\\\\n    public string? Street1 { get; set; }\\\\n    public string? Street2 { get; set; }\\\\n    public string? City { get; set; }\\\\n    public string? State { get; set; }\\\\n    public string? PostalCode { get; set; }\\\\n    public string? Country { get; set; }\\\\n    \\\\n    public string FullAddress => /* formatted address */;\\\\n}\\\\n```\\\\n\\\\n## Pagination\\\\n\\\\nMany API endpoints return paginated results:\\\\n\\\\n```csharp\\\\nvar response = await client.Contacts.GetContactsAsync();\\\\n\\\\nConsole.WriteLine($\\\\"Page {response.Pagination.CurrentPage} of {response.Pagination.TotalPages}\\\\");\\\\nConsole.WriteLine($\\\\"Total contacts: {response.Pagination.Total}\\\\");\\\\nConsole.WriteLine($\\\\"Has next page: {response.Pagination.HasNext}\\\\");\\\\n\\\\n// Navigate to next page\\\\nif (response.Pagination.HasNext)\\\\n{\\\\n    var nextPage = await client.Contacts.GetContactsAsync(new GetContactsParameters\\\\n    {\\\\n        Page = response.Pagination.CurrentPage + 1,\\\\n        PerPage = response.Pagination.PerPage\\\\n    });\\\\n}\\\\n```\\\\n\\\\n## Rate Limiting\\\\n\\\\nThe SDK automatically handles rate limiting:\\\\n\\\\n```csharp\\\\ntry\\\\n{\\\\n    var result = await client.Contacts.GetContactsAsync();\\\\n}\\\\ncatch (LawMaticsRateLimitException ex)\\\\n{\\\\n    // Automatic retry is handled by the SDK\\\\n    Console.WriteLine($\\\\"Rate limited. Retry after: {ex.RetryAfter}\\\\");\\\\n}\\\\n```\\\\n\\\\n## Testing\\\\n\\\\n### Unit Testing with Mocks\\\\n\\\\n```csharp\\\\nusing Moq;\\\\nusing Moq.Protected;\\\\n\\\\n// Create a mock HTTP handler\\\\nvar mockHandler = new Mock<HttpMessageHandler>();\\\\n\\\\n// Setup mock response\\\\nmockHandler\\\\n    .Protected()\\\\n    .Setup<Task<HttpResponseMessage>>(\\\\n        \\\\"SendAsync\\\\",\\\\n        ItExpr.IsAny<HttpRequestMessage>(),\\\\n        ItExpr.IsAny<CancellationToken>())\\\\n    .ReturnsAsync(new HttpResponseMessage(HttpStatusCode.OK)\\\\n    {\\\\n        Content = new StringContent(\\\\"{&quot;data&quot;: {&quot;id&quot;: 1, &quot;name&quot;: &quot;Test&quot;}}\\\\")\\\\n    });\\\\n\\\\n// Create client with mock handler\\\\nvar httpClient = new HttpClient(mockHandler.Object);\\\\nvar client = new LawMaticsClient(credentials, httpClient, options);\\\\n\\\\n// Test your code\\\\nvar result = await client.Contacts.GetContactAsync(1);\\\\nAssert.Equal(\\\\"Test\\\\", result.Name);\\\\n```\\\\n\\\\n## Requirements\\\\n\\\\n- **.NET 9.0** or later\\\\n- **System.Text.Json** for JSON serialization\\\\n- **Microsoft.Extensions.Http** for HTTP client factory\\\\n- **Microsoft.Extensions.Logging.Abstractions** for logging support\\\\n\\\\n## Dependencies\\\\n\\\\n- `System.Text.Json` (>= 8.0.0)\\\\n- `Microsoft.Extensions.Http` (>= 8.0.0)\\\\n- `Microsoft.Extensions.Logging.Abstractions` (>= 8.0.0)\\\\n- `Microsoft.Extensions.DependencyInjection.Abstractions` (>= 8.0.0)\\\\n\\\\n## Support\\\\n\\\\n- **Documentation**: [Full API documentation](https://docs.lawmatics.com/)\\\\n- **Issues**: [GitHub Issues](https://github.com/your-repo/LawMatics.SDK/issues)\\\\n- **Support Email**: `api@lawmatics.com`\\\\n\\\\n## License\\\\n\\\\nThis SDK is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.\\\\n\\\\n## Changelog\\\\n\\\\n### v1.0.0\\\\n- Initial release\\\\n- Full LawMatics API support\\\\n- OAuth 2.0 authentication\\\\n- Comprehensive error handling\\\\n- Unit test coverage\\\\n- Dependency injection support\\\\n\\\\n## Contributing\\\\n\\\\n1. Fork the repository\\\\n2. Create a feature branch\\\\n3. Make your changes\\\\n4. Add tests for new functionality\\\\n5. Ensure all tests pass\\\\n6. Submit a pull request\\\\n\\\\n## Code of Conduct\\\\n\\\\nPlease follow our [Code of Conduct](CODE_OF_CONDUCT.md) when contributing to this project.",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}