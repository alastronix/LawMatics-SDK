            return await SendRequestAsync<ApiResponse<T>>(HttpMethod.Get, endpoint);
        }

        protected async Task<ApiResponse<T>> PostAsync<T>(string endpoint, object? data = null)
        {
            return await SendRequestAsync<ApiResponse<T>>(HttpMethod.Post, endpoint, data);
        }

        protected async Task<ApiResponse<T>> PutAsync<T>(string endpoint, object? data = null)
        {
            return await SendRequestAsync<ApiResponse<T>>(HttpMethod.Put, endpoint, data);
        }

        protected async Task DeleteAsync(string endpoint)
        {
            await SendRequestAsync<object>(HttpMethod.Delete, endpoint);
        }

        protected async Task<T?> GetAsync<T>(string endpoint, Dictionary<string, string> parameters, CancellationToken cancellationToken = default)
        {
            var queryString = string.Join("&", parameters.Select(kvp => $"{Uri.EscapeDataString(kvp.Key)}={Uri.EscapeDataString(kvp.Value)}"));
            var fullEndpoint = $"{endpoint}?{queryString}";
            var response = await GetAsync<T>(fullEndpoint);
            return response.Data;
        }

        protected async Task<T?> GetAsync<T>(string endpoint, CancellationToken cancellationToken = default)
        {
            var response = await SendRequestAsync<ApiResponse<T>>(HttpMethod.Get, endpoint);
            return response.Data;
        }

        protected async Task<T?> PostAsync<T>(string endpoint, object data, CancellationToken cancellationToken = default)
        {
            var response = await SendRequestAsync<ApiResponse<T>>(HttpMethod.Post, endpoint, data);
            return response.Data;
        }

        protected async Task<T?> PutAsync<T>(string endpoint, object data, CancellationToken cancellationToken = default)
        {
            var response = await SendRequestAsync<ApiResponse<T>>(HttpMethod.Put, endpoint, data);
            return response.Data;
        }

        protected async Task<bool> DeleteAsync(string endpoint, CancellationToken cancellationToken = default)
        {
            await SendRequestAsync<object>(HttpMethod.Delete, endpoint);
            return true;
        }

        protected async Task<T?> DeleteAsync<T>(string endpoint, CancellationToken cancellationToken = default)
        {
            var response = await SendRequestAsync<T>(HttpMethod.Delete, endpoint);
            return response.Data;
        }

        protected async Task<byte[]> GetFileAsync(string endpoint, Dictionary<string, string>? parameters = null, CancellationToken cancellationToken = default)
        {
            var fullEndpoint = endpoint;
            if (parameters != null && parameters.Count > 0)
            {
--
            var response = await _httpClient.GetAsync(fullEndpoint, cancellationToken);
            response.EnsureSuccessStatusCode();
            return await response.Content.ReadAsByteArrayAsync(cancellationToken);
        }

        protected async Task<ApiResponse<T>> SendRequestAsync<T>(HttpMethod method, string endpoint, object? data = null)
        {
            var request = new HttpRequestMessage(method, endpoint);

            if (data != null)
            {
                var json = JsonSerializer.Serialize(data, _jsonOptions);
                request.Content = new StringContent(json, System.Text.Encoding.UTF8, "application/json");
            }

            try
            {
                _logger?.LogDebug("Sending {Method} request to {Endpoint}", method.Method, endpoint);

                var response = await _httpClient.SendAsync(request);
                var content = await response.Content.ReadAsStringAsync();

                _logger?.LogDebug("Received response with status {StatusCode}", response.StatusCode);

                if (!response.IsSuccessStatusCode)
                {
