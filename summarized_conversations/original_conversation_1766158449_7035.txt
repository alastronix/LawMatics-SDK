{'role': 'assistant', 'content': '\nNow let me create tests for the remaining clients: NotesClient and UsersClient.\n\n\n\n<function_calls>\n<create-file file_path="./LawMatics.SDK.Tests/Clients/NotesClientTests.cs">\nusing System;\nusing System.Net;\nusing System.Net.Http;\nusing System.Text.Json;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing LawMatics.SDK.Authentication;\nusing LawMatics.SDK.Clients;\nusing LawMatics.SDK.Configuration;\nusing LawMatics.SDK.Models;\nusing Microsoft.Extensions.Logging;\nusing Moq;\nusing Moq.Protected;\nusing Xunit;\n\nnamespace LawMatics.SDK.Tests.Clients\n{\n    /// <summary>\n    /// Unit tests for the <see cref="NotesClient"/> class.\n    /// </summary>\n    public class NotesClientTests : IDisposable\n    {\n        private readonly Mock<HttpMessageHandler> _mockHttpMessageHandler;\n        private readonly Mock<ILogger<NotesClient>> _mockLogger;\n        private readonly LawMaticsClientOptions _options;\n        private readonly LawMaticsCredentials _credentials;\n        private readonly HttpClient _httpClient;\n        private readonly NotesClient _client;\n\n        public NotesClientTests()\n        {\n            _mockHttpMessageHandler = new Mock<HttpMessageHandler>();\n            _mockLogger = new Mock<ILogger<NotesClient>>();\n            _options = new LawMaticsClientOptions\n            {\n                BaseUrl = "https://api.test.lawmatics.com",\n                ApiVersion = "v1",\n                TimeoutSeconds = 30\n            };\n            _credentials = new LawMaticsCredentials("test-access-token");\n            _httpClient = new HttpClient(_mockHttpMessageHandler.Object);\n            _client = new NotesClient(_httpClient, _options, _mockLogger.Object);\n        }\n\n        [Fact]\n        public async Task GetNotesAsync_WithValidResponse_ReturnsNotes()\n        {\n            // Arrange\n            var expectedResponse = new PagedResponse<Note>\n            {\n                Data = new List<Note>\n                {\n                    new Note { Id = 1, Title = "Test Note 1", Content = "Content 1", EntityType = "Contact", EntityId = 1 },\n                    new Note { Id = 2, Title = "Test Note 2", Content = "Content 2", EntityType = "Matter", EntityId = 2 }\n                },\n                Pagination = new PaginationInfo { Page = 1, PageSize = 10, TotalCount = 2 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetNotesAsync();\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(2, result.Data.Count);\n            Assert.Equal("Test Note 1", result.Data[0].Title);\n            Assert.Equal("Test Note 2", result.Data[1].Title);\n        }\n\n        [Fact]\n        public async Task GetNoteAsync_WithValidId_ReturnsNote()\n        {\n            // Arrange\n            var expectedResponse = new ApiResponse<Note>\n            {\n                Data = new Note { Id = 1, Title = "Test Note", Content = "Test Content", EntityType = "Contact", EntityId = 1 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetNoteAsync(1);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal("Test Note", result.Data.Title);\n            Assert.Equal("Test Content", result.Data.Content);\n            Assert.Equal("Contact", result.Data.EntityType);\n            Assert.Equal(1, result.Data.EntityId);\n        }\n\n        [Fact]\n        public async Task CreateNoteAsync_WithValidRequest_ReturnsCreatedNote()\n        {\n            // Arrange\n            var request = new CreateNoteRequest\n            {\n                Title = "New Note",\n                Content = "New Content",\n                EntityType = "Contact",\n                EntityId = 1,\n                Priority = "Normal"\n            };\n            var expectedResponse = new ApiResponse<Note>\n            {\n                Data = new Note \n                { \n                    Id = 1, \n                    Title = request.Title, \n                    Content = request.Content,\n                    EntityType = request.EntityType,\n                    EntityId = request.EntityId,\n                    Priority = request.Priority,\n                    CreatedAt = DateTime.UtcNow\n                }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.Created)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.CreateNoteAsync(request);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal(request.Title, result.Data.Title);\n            Assert.Equal(request.Content, result.Data.Content);\n            Assert.Equal(request.EntityType, result.Data.EntityType);\n            Assert.Equal(request.EntityId, result.Data.EntityId);\n            Assert.Equal(request.Priority, result.Data.Priority);\n        }\n\n        [Fact]\n        public async Task UpdateNoteAsync_WithValidRequest_ReturnsUpdatedNote()\n        {\n            // Arrange\n            var request = new UpdateNoteRequest\n            {\n                Title = "Updated Note",\n                Content = "Updated Content",\n                Priority = "High"\n            };\n            var expectedResponse = new ApiResponse<Note>\n            {\n                Data = new Note \n                { \n                    Id = 1, \n                    Title = request.Title, \n                    Content = request.Content,\n                    Priority = request.Priority,\n                    UpdatedAt = DateTime.UtcNow\n                }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.UpdateNoteAsync(1, request);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(1, result.Data.Id);\n            Assert.Equal(request.Title, result.Data.Title);\n            Assert.Equal(request.Content, result.Data.Content);\n            Assert.Equal(request.Priority, result.Data.Priority);\n        }\n\n        [Fact]\n        public async Task DeleteNoteAsync_WithValidId_ReturnsSuccessResponse()\n        {\n            // Arrange\n            var expectedResponse = new ApiResponse<object> { Data = null };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.NoContent)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.DeleteNoteAsync(1);\n\n            // Assert\n            Assert.NotNull(result);\n        }\n\n        [Fact]\n        public async Task GetNotesByEntityAsync_WithEntityTypeAndId_ReturnsEntityNotes()\n        {\n            // Arrange\n            var entityType = "Contact";\n            var entityId = 1;\n            var expectedResponse = new PagedResponse<Note>\n            {\n                Data = new List<Note>\n                {\n                    new Note { Id = 1, Title = "Entity Note 1", EntityType = entityType, EntityId = entityId },\n                    new Note { Id = 2, Title = "Entity Note 2", EntityType = entityType, EntityId = entityId }\n                },\n                Pagination = new PaginationInfo { Page = 1, PageSize = 10, TotalCount = 2 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetNotesByEntityAsync(entityType, entityId);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(2, result.Data.Count);\n            Assert.All(result.Data, note => \n            {\n                Assert.Equal(entityType, note.EntityType);\n                Assert.Equal(entityId, note.EntityId);\n            });\n        }\n\n        [Fact]\n        public async Task GetNotesByUserAsync_WithUserId_ReturnsUserNotes()\n        {\n            // Arrange\n            var userId = 1;\n            var expectedResponse = new PagedResponse<Note>\n            {\n                Data = new List<Note>\n                {\n                    new Note { Id = 1, Title = "User Note 1", CreatedBy = userId },\n                    new Note { Id = 2, Title = "User Note 2", CreatedBy = userId }\n                },\n                Pagination = new PaginationInfo { Page = 1, PageSize = 10, TotalCount = 2 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.GetNotesByUserAsync(userId);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Equal(2, result.Data.Count);\n            Assert.All(result.Data, note => Assert.Equal(userId, note.CreatedBy));\n        }\n\n        [Fact]\n        public async Task SearchNotesAsync_WithSearchTerm_ReturnsFilteredNotes()\n        {\n            // Arrange\n            var searchTerm = "Important";\n            var expectedResponse = new PagedResponse<Note>\n            {\n                Data = new List<Note>\n                {\n                    new Note { Id = 1, Title = "Important Note", Content = "This is important", EntityType = "Contact" }\n                },\n                Pagination = new PaginationInfo { Page = 1, PageSize = 10, TotalCount = 1 }\n            };\n            var responseJson = JsonSerializer.Serialize(expectedResponse);\n            var httpResponse = new HttpResponseMessage(HttpStatusCode.OK)\n            {\n                Content = new StringContent(responseJson, System.Text.Encoding.UTF8, "application/json")\n            };\n\n            _mockHttpMessageHandler\n                .Protected()\n                .Setup<Task<HttpResponseMessage>>(\n                    "SendAsync",\n                    ItExpr.IsAny<HttpRequestMessage>(),\n                    ItExpr.IsAny<CancellationToken>())\n                .ReturnsAsync(httpResponse);\n\n            // Act\n            var result = await _client.SearchNotesAsync(searchTerm);\n\n            // Assert\n            Assert.NotNull(result);\n            Assert.NotNull(result.Data);\n            Assert.Single(result.Data);\n            Assert.Contains(searchTerm, result.Data[0].Title);\n        }\n\n        public void Dispose()\n        {\n            _httpClient?.Dispose();\n            _client?.Dispose();\n        }\n    }\n}\n</create-file>\n</function_calls>'}